{% extends "base.html" %}
{% block body %}
<div class="max-w-lg mx-auto mt-10 bg-white p-8 rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold mb-6 text-indigo-700">Novo Agendamento</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        {% if form.hora.errors %}
        <div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded">
            <strong>Erro:</strong> {{ form.hora.errors|striptags }}
        </div>
        {% endif %}
        <div class="mb-4">
            {{ form.data.label_tag }}<br>
            {{ form.data }}
        </div>
        <div class="mb-4">
            {{ form.hora.label_tag }}<br>
            {{ form.hora }}
        </div>
        <div class="mb-4">
            {{ form.terapeuta.label_tag }}<br>
            {{ form.terapeuta }}
        </div>
        <div class="mb-4">
            {{ form.paciente.label_tag }}<br>
            {{ form.paciente }}
        </div>
        <div class="mb-4">
            {{ form.observacoes.label_tag }}<br>
            {{ form.observacoes }}
        </div>
        <div class="mb-4">
            {{ form.duracao.label_tag }}<br>
            {{ form.duracao }} <span class="text-sm text-gray-500">minutos</span>
        </div>
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Salvar</button>
        <a href="{% url 'calendario' %}" class="ml-4 text-gray-600 hover:underline">Cancelar</a>
    </form>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Preencher duração padrão do localStorage
    var duracaoInput = document.getElementById('id_duracao');
    if (duracaoInput && localStorage.getItem('sessionDuration')) {
        duracaoInput.value = localStorage.getItem('sessionDuration');
    }
});
</script>
{% endblock body %}